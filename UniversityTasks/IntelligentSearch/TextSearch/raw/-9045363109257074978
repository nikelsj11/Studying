#TITLE:Немного истории: Как развивались биржевые технологии

      
Для современных биржевых площадок скорость работы является важнейшим фактором в привлечении инвесторов. Торговцы хотят покупать и продавать финансовые инструменты быстро, чтобы избежать возможности изменения цены в процессе исполнения транзакции. Важно также качество рыночных данных, на основе которых принимается решение о покупке или продаже, а также общая надежность инфраструктуры.
За несколько сотен лет биржи прошли путь от публикации цены дважды в неделю на небольших клочках бумаги — как это было, например, в Лондоне, где брокеры собирались в кофейне «У Джонатана», до настоящего технологического большого взрыва в 80-е годы прошлого века.Big Bang
В октябре 1986 года на лондонской бирже заработала автоматизированная система расчета котировок (Stock Exchange Automated Quotation), которая заменила собой торговлю голосом. Теперь брокеры могли покупать и продавать акции с помощью компьютеров без необходимости созваниваться или встречаться лично.
В интервью изданию Computer Weekly главный инженер лондонской биржи Робин Пэйн (Robn Paine) отметил, что внедрение системы принесло свои выгоды, как частным, так и институциональным инвесторам — порог входа на биржу снизился, торговать стало проще.
Все это привело к росту объёмов торгов — если до внедрения автоматизированной системы число заключаемых сделок на биржевой площадке Лондона составляло около 20000 в день (примерно на £700 млн), то спустя несколько месяцев после внедрения это число увеличилось до 59000 сделок в день, а к середине двухтысячных годов достигло 566 тысяч в день.Не все так просто
Однако внедрение новых технологий проходило не без сложностей. В 1987 году произошел так называемый «черный понедельник» — крупнейшее падение в истории мирового фондового рынка. 19 октября 1987 года Промышленный индекс Доу-Джонса потерял 22,6%. 
Это событие сказалось и на финансовых площадках в других странах — фондоый рынок Австралии потерял к концу октября более 40%, Канады — более 22%, Великобритании — 26%.
Аналитик TowerGroup Боб МакДоуал (Bob McDowall) сказал Computer Weekly, что несмотря на то, что технологии не являлись причиной черного понедельника, автоматизация способствовала ускорению падения фондового рынка.В те времена технологии анализа ситуации на рынке были не столь развиты и не обрабатывали информацию о факторах, кроме собственно цены акций.
Биржи были вынуждены разработать системы и регламенты для приостановки торгов в моменты значительного или аномально быстрого изменения цены конкретной или нескольких акций.
1987 год ознаменовался не только «Черным понедельником», но и первыми чисто технологическими сбоями на фондовых площадках — например, 9 декабря 1987 года произошел масштабный сбой в работе Nasdaq. Тогда сервис котировок Национальной ассоциации дилеров по ценным бумагам не работал целых 82 минуты, нештатная ситуация привела к тому, что в торгах перестали участвовать более 20 млн различных акций. 
Причиной сбоя стала обычная белка, которая пробралась в главный компьютерный центр биржи в городе Трамбулл штата Коннектикут и перегрызла там проводку. Тело животного было обнаружено электриками компании United Illuminating в процессе работ по восстановлению электроснабжения.Протоколы передачи данных
Перевод торговли в электронный формат потребовало и создание соответствующих протоколов передачи данных. В 1992 году ряд финансовых организации инициировал создание протокола FIX. Впоследствии FIX стал отраслевым стандартом, который используется участниками финансового рынка разных стран для связи своих продуктов. Подробнее о нем мы писали в этом материале.
В середине двухтысячных годов стало понятно, что текущая версия протокола на справляется с возросшим объёмом финансовой информации, генерируемой фондовыми рынками.
При передачи больших объёмов данных с помощью FIX возникали значительные задержки в их обработке, что приносило трейдерам убытки и лишало их возможности разработки действующих торговых стратегий.
Классический формат передачи сообщений Tag=Value, использовавшийся в FIX, оказался слишком громоздким для его быстрой обработки. Чтобы решить эту проблему был разработан новый протокол FAST. Пилотный проект был представлен в 2005 году.Схема работы по протоколу FAST
Согласно стандарту FIX-протокола каждое сообщение имеет формат Tag = Value SOH, где Tag — это номер передаваемого поля, Value — его значение, а SOH — символ-разделитель. Пример записи сообщения в синтаксисе Tag = Value:35=x|268=3 (message header) 279=0|269=2|270=9462.50|271=5|48=800123|22=8 (trade) 279=0|269=0|270=9462.00|27

FIX и FAST — это международные стандарты, но кроме них локальные биржевые площадки реализуют и собственные «нативные» протоколы.
Их используют для получения нужной информации как частные торговцы, так и брокерские компании — такие нативные протоколы более функциональны, чем общепринятые стандарты (вроде того же FIX), что привлекает брокеров. В России примером такой разработки можно назвать протокол Plaza II, который был создан специалистами биржи РТС. Подробнее о нем здесь.Новые технологии для скоростной торговли
Важность скорости работы приобрела еще большее значение с распространением алгоритмического трейдинга. Появилось огромное количество систем и алгоритмов, использующих те или иные неэффективности фондового рынка.
Такие системы совершают десятки и сотни тысяч транзакций в день — и для того, чтобы заработать, им необходимо хоть на микроскопическую долю секунды опередить конкурентов. 
Биржевые площадки, стремясь привлечь инвесторов, стремились делать все возможное для повышения скорости и снижения задержек. В частности, так родилась технология прямого доступа на биржу (в нашем блоге был материал о ней).Прямой доступ (Direct Market Access, DMA) представляет собой технологию высокоскоростного доступа на биржевые площадки, при котором заявка выставляется в торговую систему биржи напрямую, минуя торговую систему брокера. Все это позволяет существенно сократить время доставки заявки на биржу и получения информации о ее состоянии. 
Также стали развиваться услуги колокации — многие биржи стали предлагать клиентам возможность размещения своих серверов с торговыми роботами в том же дата-центре, где находится и ядро торговой системы биржи. Такие услуги есть и на Московской биржи.
Сейчас, торговые сервера Московской биржи размещены в ЦОД М1. Торговые роботы, подключаемые к биржевым серверам, могут размещаться в двух зонах – так называемой DMA-зоне свободной коллокации и зоне непосредственной коллокации биржи.
Свои услуги по колокации стали предлагать и брокеры (например, ITinvest). В случае Московской биржи — они предлагают размещение серверов и виртуальных машин в зоне свободной колокации. В этом случае транзакции обрабатываются чуть медленнее, но и стоимость размещения торговой системы снижается.Развитие инфраструктуры
На протяжении последних десятилетий биржевые площадки должны были думать и о повышении надежности. Инвесторов отпугивает возможность сбоев, которые выражаются как в приостановке торгов, так и в некорректном отображении информации — это может привести к финансовмым потерям, поскольку те же торговые роботы могут продолжать торговать по неверным данным себе в убыток, не понимая этого.
Поэтому финансовые организации работали не только над оптимизацией софта, но и выстраивали мощные дата-центры, где устанавливались серверы с «движками» бирж. Вот, к примеру, как выглядит один из таких узлов онлайн-трейдинга, дата-центр компании Equinix:12-метровый потолок с несколькими уровнями размещения кабель-каналовОхлаждение через подвесную систему воздуховодовЗал источников бесперебойного питания (ИБП), питающийся от подстанции на 26 мегавольт-ампер. Мощность оборудования 30 мегаватт.Больше фото из дата-центра Equinix в нашем материале.
Однако обеспечение скорости работы было и остается главным фокусом. Если изучить статистику быстродействия исполнения ордеров (latency) на различных биржевых площадках в 2010 году и сравнить с тем, что было несколькими годами спустя, разница может показаться колоссальной.
Вот значения latency крупнейших биржевых площадок мира (здесь ASTS — фондовый рынок ММВБ, а FORTS — это РТС; позднее две эти площадки объединились в Московскую биржу):
Уже в 2013 году ситуация изменилась довольно существенно:
Позднее в том же 2013 году время исполнения заявок на в системе ASTS было доведено до 50 микросекунд, а в системе FORTS (Spectra) составило 35 миксросекунд. В настоящий момент эти цифры еще ниже.Что еще: безопасность
Основными технологическими трендами фондового рынка все еще остается увеличение быстродействия работы и повышение надежности систем. Кроме того, все больше внимания биржевые площадки вынуждены уделять защите своей инфраструктуры от хакеров.
Только за прошедшие пару лет было зафиксировано несколько случаев кибератак — например, в 2013 году неизвестные хакеры взломали систему Nasdaq, что позволило им два года проникать в нее, оставаясь незамеченными. Уже в 2015 году возникли подозрения в том, что хакеры из группировки Anonymous или Китая атаковади Нью-Йоркскую биржу.

      
      
    