#TITLE:Скрытый баг (фича ?) коммутатора ZyXEL ES-2108-G

      
Администрируя сеть Tier-3 провайдера, сталкиваешься с очень интересными особенностями некоторых вендоров.
Об одной из таких особенностей и пойдет речь в этой статье.Предыстория
Изначально была следующая топология сети:
За ненадобностью было решено демонтировать Switch 1. Не дождавшись отчета монтажников, я, сидящий за PC 1, решил проверить доступность коммутатора. Как и следовало ожидать — он не пинговался. Не помню из каких соображений, решил сделать до него трейс.
Как ни странно — трассировка достигла конечного узла, но ответ пришел от IP-адреса, настроенного на ZyXEL'е.
Спустя некоторое количество времени ситуация нормализовалась, трейс не уходил дальше Router 1, но увиденное 
не давало мне покоя.Поиск причин
После очередного рабочего решил собрать аналогичную топологию в офисе и докопаться до истины.
Приложив минимальные усилия, собрал тестовую сеть:
Проверил доступность каждого из узлов — все пингуется. Далее запустил Wireshark на Test PC, отключил (физически) Test Switch. Как и раньше — пинг до Test Switch не проходил, но traceroute на 10.230.160.20 упорно показывал конечным узлом 10.230.160.9.
Я получил то чего хотел — дамп трафика.
Как видно — пакеты уходят от Test PC в сторону Test Switch:
Дальше получаем ICMP-пакеты от Zyxel Type-3, Code-3:
После очистки FDB на Zyxel'е, я увидел долгожданный ARP:
Почему traceroute выводил конечным узлом Zyxel — мы разобрались, осталось понять причину странного поведения Zyxel'я.Заключение
За ответом, мучающим меня, я направился в службу поддержки компании Zyxel. Беседа длилась неделю, я отправлял специалистам дампы, файлы конфигурации, они, в свою очередь, предлагали актуальные версии микропрограммы, которые, к сожалению, не исправляли данный баг.
В итоге переписки специалисты из Zyxel подтвердили наличии неисправности, но т.к. это не влияет на работоспособность сети в целом, да и сама модель снята с производства, изменений в прошивку внесено не будет.
Данный ответ меня вполне устроил, аналогичные коммутаторы из сети убрал, ТТ закрыл.
P.S. Не судите строго, буду рад ответить на все интересующие вас вопросы.
Спасибо за внимание!
      
    