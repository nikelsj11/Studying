#TITLE:Масштабирование до 24 контроллеров в новой СХД ETERNUS DX

      
Корпорация Fujitsu в сентябре начинает поставки следующего поколения своих дисковых массивов класса high-end ETERNUS DX8700 S3 и DX8900 S3, построенного по новой модульной архитектуре Quad Star. Выход на рынок этих систем хранения завершает начатый в конце 2013 года переход Fujitsu на третье поколение массивов ETERNUS DX S3, которые существенно превосходят своих предшественников по масштабируемости и производительности благодаря использованию новейших технологий, в том числе 12-гигабитного интерфейса SAS, 16-гигабитного Fibre Channel и шины PCI Express Gen3, а также последних моделей многоядерных процессоров Intel Xeon, жестких дисков емкостью до 6 Тбайт и твердотельных накопителей (подробнее о новшествах третьего поколения ETERNUS DX среднего класса можно прочитать здесь и здесь). Отметим, что история дисковых массивов Fujitsu началась еще в 1970-х годах, однако до конца прошлого десятилетия ее массивы не продавались за пределами Японии, поэтому на европейском рынке систем хранения Fujitsu дебютировала в 2009 году, когда вышла серия ETERNUS DX S1. 
Применение архитектуры «четырехугольной звезды» Quad Star, основанной на использовании сверхскоростных коммутаторов для объединения контроллеров массива, значительно улучшило масштабируемость массивов. Если в ETERNUS DX S3 среднего класса контроллеры массива соединены напрямую, то в новых ETERNUS DX8000 даже в минимальной конфигурации из двух контроллеров они соединяются через коммутаторы массива. Для обеспечения высокой доступности и защиты от отказов в ETERNUS DX8000 S3 установлено четыре коммутатора, что обеспечивает многократное резервирование путей передачи данных по шине PCIe 3.0 между контроллерами (отметим, что многократное резервирование применяется и для других основных компонентов массива, что практически полностью устраняет риск потери доступа к данным из-за аппаратного сбоя массива).
Рассмотрим подробнее системную архитектуру новых ETERNUS DX8000.
Рисунок 1.Базовая архитектура системы
На Рисунке 1 показана базовая архитектура системы, в котором четыре модуля контроллера Controller Module (CM) соединены между собой по PCI Express через фронтальные коммутаторы Front-end Router (FRT), установленные в полке Front-end Enclosure (FE). Каждый контроллер CM оборудован одним или несколькими адаптерами для подключения к хостам Channel Adapter (CA) и одним или несколькими интерфейсами дисков. Как уже говорилось выше, для обеспечения максимальной защиты от отказов каждый контроллер соединяется со всеми четырьмя маршрутизаторами FRT. Это четырехкратное резервирование соединений и дало название «четырехугольной звезды» архитектуры третьего поколения восьмитысячников ETERNUS DX. Кроме того, у дисковых полок Drive Enclosure (DE), в которые устанавливаются накопители массива, имеется два независимых порта SAS-3, подключаемые напрямую к контроллерам CM, размещенным в полке контроллеров Controller Enclosure (CE), что также обеспечивает резервирование путей передачи данных. В многоконтроллерных конфигурациях массива соседние контроллеры обращаются к дисковой полке через коммутаторы FRT.
Рисунок 2.Схема контроллера
Упрощенная схема контроллера CM показана на Рисунке 2. Он состоит из процессора Xeon, на котором работает операционная система жесткого реального времени VxWorks, память DRAM, включая кэш данных, и адаптеры хостов CA. Каждый контроллер CM может подключаться максимум к 16 дисковым полкам DE через расширитель SAS Expanders (EXP). Четырехпортовая интерфейсная плата PCIe 3.0 Interface (INF) обеспечивает высокоскоростное подключение контроллера к коммутаторам FRT. Как опция каждый контроллер CM оборудуется одним или двумя модулями флэш-памяти PCI Express Flash Modules (PFM), которые и образуют кэш-память второго уровня Extreme Cache.
Рисунок 3. Схема подключения полки контроллеров CE
Контроллеры устанавливаются парами в полке CE и соединяются между собой по PCIe 3.0 через четыре резервированных коммутатора FRT, установленные в полке FE. Минимальная конфигурация ETERNUS DX8000 S3 состоит из установленных в одной 42-юнитовой стойке двух контроллеров и одной полки контроллеров CE и расширяется до 24 контроллеров и 12 полок контроллеров CE (Рисунок 4), которые могут занимать до 12 стоек 42U.
Рисунок 4.Максимальная конфигурация ETERNUS DX8000 S3
Таким образом, если предыдущее поколение high-end массивов ETERNUS DX8000 S2 расширялось максимум до 8 контроллеров и 3072 дисков общей емкостью около 6 Пбайт, то новый флагман линейки дисковых массив корпорации DX8900 S3 поддерживает конфигурации из 24 контроллеров и 4608 дисков суммарной мощностью почти 14 Пбайт, оборудованной 384 портами front-end (младшая модель DX8700 S3 масштабируется до 8 контроллеров и 1536 дисков общей емкостью 4,6 Пбайт). Такие гигантские показатели расширения емкости позволят владельцам массивов успешно справиться с непредсказуемым ростом объемов данных и в то же время с помощью модульной архитектуры в онлайновом режиме гибко масштабировать свои ресурсы хранения, добавляя в массив контроллеры, дисковые полки или отдельные диски по мере роста потребностей в производительности и емкости, начиная с минимальной конфигурации из двух контроллеров, поддерживающей до 384 дисков. При необходимости младшую модель можно модернизировать до уровня старшей простой заменой контроллеров и без переписывания данных (data-in-place). Кроме того, Fujitsu предлагает сервис по миграции данных с ETERNUS DX среднего класса на Eternus DX8000 S3, гарантирующий сохранность информации. 
Контроллеры массивов ETERNUS DX8000 S3 оборудованы кэш-памятью DRAM объемом до 6 Тбайт и кэш-памятью второго уровня на твердотельных дисках (SSD) объемом до 67 Тбайт. Они поддерживают подключение к сети хранения SAN по интерфейсам Fibre Channel 16 Гбит/сек, FCoE и iSCSI. Благодаря применению «четырехугольной звезды», новых интерфейсов и процессоров Xeon, а также оборудованию контроллеров кэш-памятью второго уровня Extreme Cache, которая отсутствовала у систем предыдущего поколения, по производительности новые массивы превосходят DX8000 S2 в восемь раз и обеспечивают быстродействие ввода/вывода более 4 млн. IOPS.
Для обеспечения максимальной доступности данных бизнес-критичных приложений на уровне шести девяток (99,9999%) в них применяются «мгновенные снимки», синхронная и асинхронная репликация между массивами для защиты данных от крупных аварий, пакет Fujitsu Storage Cluster для полностью автоматизированного онлайн переключения на резервную площадку без остановки функционирования приложений, а также ускоренное восстановление данных со сбойных дисков RAID-массивов Fast Recovery (о Storage Cluster и Fast Recovery, которые Fujitsu представила в прошлом году, можно прочитать здесь).
Еще одно преимущество новых ETERNUS DX8000 – использование тех же программных средств управления хранением ETERNUS пакета программного обеспечения ETERNUS SF, которые применяются в ранее выпущенных моделях ETERNUS DX S3 младшего и среднего класса. Такая унификация ПО управления разных моделей ETERNUS DX S3 упрощает работу администратора СХД, который с помощью одних и тех инструментов может управлять системами хранения разных классов. Кроме того, с помощью пакета Storage Cluster можно реплицировать данные с ETERNUS DX8000 S3 на модель среднего класса, например, ETERNUS DX600 S3, что существенно сокращает затраты на закупки оборудования резервного дата-центра, если в основном дата-центре установлена старшая модель ETERNUS DX. Вместе с выходом DX8000 S3 в пакет ETERNUS SF добавлены функции автоматического QoS, с помощью которых системный администратор может задавать максимально допустимые задержки доступа к данным. Еще одно новшество DX8000 S3 – поддержка виртуальных томов VMware vSphere Virtual Volumes, повышающих эффективность хранения данных для виртуализованной инфраструктуры VMware vSphere. 
Стоит подчеркнуть, что Fujitsu является одним из немногих игроков на рынке систем хранения, который сам разрабатывает все свои дисковые массивы, начиная от моделей начального уровня и до массивов high-end. В результате в отличие от других крупных вендоров, у которых продуктовая линейка СХД часто объединяет как продукты собственной разработки, так и системы недавно поглощенных компаний и OEM-версии массивов других производителей, массивы Fujitsu разных классов и поколений легко интегрируются между собой без использования специализированных решений виртуализации хранения, что существенно снижает расходы заказчика на построение корпоративной инфраструктуры хранения данных. Кроме того, во всех ETERNUS DX S3 используются одни и те же дисковые полки, стойки и кабели, поэтому при модернизации массива до уровня более мощной модели инвестиции заказчика в аппаратную часть СХД будут защищены.
Обладающие рекордной масштабируемостью среди дисковых массивов high-end системы Fujitsu ETERNUS DX8000 S3 способны успешно справиться с самыми тяжелыми приложениями, используемыми в корпоративной ИТ-инфраструктуре, и обеспечивают их готовность на уровне шести девяток.

      
      
    