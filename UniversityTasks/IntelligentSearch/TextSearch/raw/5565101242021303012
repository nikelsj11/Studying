#TITLE:VAD (Voice Application Designer). Часть 2 компоненты (Call Related)

      
Поговорим о компонентах, которые доступны в конструкторе и в конце небольшой пример по описанным компонентам. Для удобства, компоненты поделены на три категории:
1. Call Related (управление вызовами)
 2. Control Structures (управление структурой)
 3. Advanced (дополнительные возможностиКатегория Call Related.
Набор компонентов, которые отвечают за управление вызовом в зависимости от маршрутизации или от посыла DTMF со стороны вызывающего. 
А теперь по порядку.Menu  Компонент меню выбора. Основа дерева IVR, с возможностью выбора используемых кнопок:
Настройки компонента:Allow Barge In – разрешать или запрещать донабор внутреннего номера, а так же возможность использовать меню IVR.
Timeout (secs) – таймаут, после которого проиграет специальное сообщение (TimeoutPrompts).
Max Retry Count – количество повторов проигрываемого звукового файла.
Option 0-1, *, # — кнопки, которые можно запрограммировать под определенное действие для использования на клавиатуре телефона.

Кроме того, в компоненте Menu необходимо выбрать звуковые файлы, для разных событий: InitialPrompts – стартовое приветствие.
InvalidDigitPrompts – сообщение, если были введены не используемые цифры.
SubsequentPrompts – голосовое сообщение, которое можно проиграть дополнительно к основному приветствию после значения указанного в поле Max Retry Count или между. Например, у вас указано проигрывать приветствие 3 раза, но вы понимаете, что если приветствие проигрывается уже два раза, то что-то возможно не так и можно предложить альтернативный вариант, например, сообщить о каком-либо скрытом меню или выдать какую-либо подсказку:
MinTryCount – регулируемое значение. Указывает после какого количества раз вставлять дополнительный звуковой файл после проигрывания основного приветствия.
TimeoutPrompts – сообщение, которое проигрывается, если не было введено ни каких действий.User Input Компонент, который отвечает за возможность набирать внутренний номер или любое другое количество цифр в зависимости от задачи данного компонента. 
Настройки компонента:Allow Barge In – разрешать или запрещать донабор внутреннего номера, а так же возможность использовать меню IVR.
Max Retry Count – количество повторов проигрываемого звукового файла.
First Digit Timeout (secs) – таймаут до ввода первой цифры.
Inter Digit Timeout (secs) – таймаут между вводом цифр.
Final Digit Timeout (secs) – время ожидания перед набором номера, если номер набран в рамках ограничения
Min Digits – минимальная длина допустимого номера
Max Digits – максимальная длина допустимого номера
Stop Digit – принудительный набор набранных цифр
Valid Digits – цифры допустимы для набора. Если была использована цифра, запрещенная для набора, то проиграется соответствующее уведомление.

Имеет настройку для голосовых сообщений, полная аналогия как для компонента Menu.Prompt Playback Компонент, которые отвечает за вставку различных голосовых сообщение, с возможность разрешать или запрещать вводить символы во время проигрывания файла.
Настройки компонента:Description – описание компонента.
Enabled – Включение/Выключение компонента.
(Name) – Имя компонента, должно быть уникальным в рамках проекта.
AllowBargeIn – разрешает или запрещает набирать цифры.
Prompts – выбор звукового файла.
Record Компонент, который отвечает за запись разговоров. 
Настройки компонента:Emit beep just prior to recording – проигрывать ли сигнал «beeeep» переда началом записи
Maximum Time (secs) – ограничение по максимальному времени записи. В данном примере, если разговор длится более 60 сек, то все что выше 60 сек записано не будет.
Final Silence (secs) – завершать запись разговора, если в течении указанного времени (10 сек в примере) система автоматически завершит запись.
Terminate by DTMF – доп. опция, с помощью нее можно разрешить завершать запись по нажатию определенной кнопки или по набору определенного цифрового значения.
Save to file и File Name – свойства могут быть установлены с помощью выражения. Для того, чтобы создать выражение для этих свойств, используется кнопка «Редактор выражений» на правой стороне:
Transfer  Компонент, который отвечает за перевод вызова к определенному номеру или в буфер или в любое другое доступное место, где обрабатывается набранный номер:
Настройки компонента:
Перенаправить вызов можно:Javascript Expression – Java выражение
Variable – варианты, доступные на текущем CallFlow (т.е. учитываются все доступные компоненты на текущем рабочем пространстве)
VAD Expression – выражения, используемые VAD, предуставленные выражения:
Disconnect Call Компонент завершение вызова.
Компонент не имеет каких-либо тонких настроек, а просто включается или выключается.Пример, построения простого IVR меню:
В этом IVR предусмотрено:
 1. Входящий вызов
 2. Далее сообщение, которое предлагает либо соединиться с очередью «Менеджеры» или нажать на кнопку «2», для набора внутреннего номера.
 3. После нажатия на кнопку «2», клиент переходит в отдельное меню, где ему позволено набирать внутренний номер, хочу заметить, что в основном меню ему запрещен набор внутренних номеров.
 4. Далее, если он набирает правильный внутренний номер, то АТС соединит клиента с внутренним абонентом, если не правлений, то система сообщит о том, что клиент набрал не правильный внутренний номер и завершит вызов.
 5. Если клиент ничего не набрал, то система выдаст голосовое сообщение, предусмотренное для действия по таймауту. 
Вот такое вот простое IVR меню, можно собрать за 5 минут и внести ограничения по набору номера.
В следующей статье, расскажу про возможности компонентов «Control Structures».

      
      
    